{"version":3,"file":null,"sources":["../src/components/ball/ball.js","../src/components/world-view/world-view.js","../src/app.js"],"sourcesContent":["/*global document */\n//@flow\n\nconst SVG_NS = 'http://www.w3.org/2000/svg';\n\n// Hardcoded radius for now\nconst defaultRadius = 6;\n\ndeclare class SVGLength {\n  value: number;\n  valueAsString: string;\n}\n\ndeclare class SVGAnimatedLength {\n  baseVal: SVGLength;\n}\n\ndeclare class SVGCircleElement extends Element {\n  cx: SVGAnimatedLength;\n  cy: SVGAnimatedLength;\n  r: SVGAnimatedLength;\n}\n\nexport class Ball {\n  elem: SVGCircleElement;\n  stopped: boolean;\n  currentTime: number;\n  initialCoords: [ number, number ];\n  initialVelocity: number;\n  initialAngle: number;\n\n\n  constructor( x: number, y: number ) {\n    this.elem = makeCircle( x, y, defaultRadius );\n    this.stopped = false;\n    this.currentTime = 0;\n\n    this.initialCoords = [ x, y ];\n    this.initialAngle = getRandomInt( 0, 360 );\n    this.initialVelocity = getRandomInt( 10, 200 );\n  }\n\n  isMoving() {\n    return !this.stopped;\n  }\n\n  getCoords(): [ number, number ] {\n    const cx = this.elem.cx.baseVal.value;\n    const cy = this.elem.cy.baseVal.value;\n\n    return [ cx, cy ];\n  }\n\n  move() {\n    this.currentTime += 1;\n\n    const [ initialX, initialY ] = this.initialCoords;\n    const [ x, y ] = calcPosition( initialX, initialY, this.initialAngle, this.initialVelocity, this.currentTime );\n\n    this.moveTo( x, y );\n  }\n\n  moveTo( cx: number, cy: number ) {\n    setCirclePosition( this.elem, cx, cy );\n  }\n}\n\n\n/**\n * Calculate position of ball at a given time, based on starting velocity.\n *\n * Formulas from: http://entertainment.howstuffworks.com/physics-of-football2.htm\n *\n * @param initialX: starting X coord\n * @param initialY: starting Y coord\n * @param angleDegrees: starting angle in degrees\n * @param v: velocity\n * @param t: current time\n * @returns tuple of [ x, y ] coord\n */\nfunction calcPosition( initialX: number, initialY: number, angleDegrees: number, v: number, t: number ): [ number, number ] {\n  // Math.cos and Math.sin require angle in radians\n  const angleRadians = degreesToRadians( angleDegrees ),\n    vx = v * Math.cos( angleRadians ),\n    vy = v * Math.sin( angleRadians ),\n    x = vx * t,\n    y = vy * t - 0.5 * 9.8 * t * t\n\n  return [ initialX + x, initialY - y ];\n}\n\nfunction degreesToRadians( angle ) {\n  return angle * ( Math.PI / 180 );\n}\n\nfunction getRandomInt( min: number, max: number ) {\n  return Math.floor( Math.random() * ( max - min ) ) + min;\n}\n\nfunction makeCircle( cx: number, cy: number, radius: number ): SVGCircleElement {\n  const circleElement: SVGCircleElement = createSVGElement( 'circle' );\n  setCircleRadius( circleElement, radius );\n  setCirclePosition( circleElement, cx, cy );\n  circleElement.setAttribute( 'class', 'ball' );\n  return circleElement;\n}\n\nfunction createSVGElement<T>( nodeName: string ): T {\n  // Requires cast to any for return type T to work\n  return ( document.createElementNS( SVG_NS, nodeName ): any );\n}\n\nfunction setCircleRadius( circleElement: SVGCircleElement, r: number ) {\n  circleElement.setAttribute( 'r', r.toString() );\n}\n\nfunction setCirclePosition( circleElement: SVGCircleElement, x: number, y: number ) {\n  circleElement.setAttribute( 'cx', x.toString() );\n  circleElement.setAttribute( 'cy', y.toString() );\n}\n","//@flow\n/*global window*/\n\nimport { Ball } from '../ball/ball.js';\n\nexport class WorldView {\n  allBalls: Array<Ball>;\n  elem: HTMLElement;\n\n\n  constructor( elem: HTMLElement ) {\n    this.elem = elem;\n    this.allBalls = [];\n\n    const clickHandler: EventHandler = this.worldClicked.bind( this );\n\n    elem.addEventListener( 'click', clickHandler );\n\n    window.setInterval( this.moveBalls.bind( this ), 200 );\n  }\n\n  addBall( x: number, y: number ) {\n    const newBall = new Ball( x, y );\n    this.allBalls.push( newBall );\n    this.elem.appendChild( newBall.elem );\n  }\n\n  worldClicked( event: MouseEvent ) {\n    const { offsetX, offsetY } = event;\n    this.addBall( offsetX, offsetY );\n  }\n\n  moveBalls() {\n    this.allBalls\n      .filter( b => b.isMoving() )\n      .forEach( b => b.move() );\n  }\n}\n","//@flow\n\nimport { WorldView } from './components/world-view/world-view.js';\n\nfunction initialise( elem: HTMLElement ) {\n  new WorldView( elem );\n}\n\nexport default {\n  initialise\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAGA,IAAM,SAAS,4BAAf;;;AAGA,IAAM,gBAAgB,CAAtB;;AAiBA,IAAa,IAAb;gBASe,CAAb,EAAwB,CAAxB,EAAoC;;;SAC7B,IAAL,GAAY,WAAY,CAAZ,EAAe,CAAf,EAAkB,aAAlB,CAAZ;SACK,OAAL,GAAe,KAAf;SACK,WAAL,GAAmB,CAAnB;;SAEK,aAAL,GAAqB,CAAE,CAAF,EAAK,CAAL,CAArB;SACK,YAAL,GAAoB,aAAc,CAAd,EAAiB,GAAjB,CAApB;SACK,eAAL,GAAuB,aAAc,EAAd,EAAkB,GAAlB,CAAvB;;;;;+BAGS;aACF,CAAC,KAAK,OAAb;;;;gCAG8B;UACxB,KAAK,KAAK,IAAL,CAAU,EAAV,CAAa,OAAb,CAAqB,KAAhC;UACM,KAAK,KAAK,IAAL,CAAU,EAAV,CAAa,OAAb,CAAqB,KAAhC;;aAEO,CAAE,EAAF,EAAM,EAAN,CAAP;;;;2BAGK;WACA,WAAL,IAAoB,CAApB;;yCAE+B,KAAK,aAH/B;;UAGG,QAHH;UAGa,QAHb;;0BAIY,aAAc,QAAd,EAAwB,QAAxB,EAAkC,KAAK,YAAvC,EAAqD,KAAK,eAA1D,EAA2E,KAAK,WAAhF,CAJZ;;;;UAIG,CAJH;UAIM,CAJN;;;WAMA,MAAL,CAAa,CAAb,EAAgB,CAAhB;;;;2BAGM,EAvCV,EAuCsB,EAvCtB,EAuCmC;wBACZ,KAAK,IAAxB,EAA8B,EAA9B,EAAkC,EAAlC;;;;;;;;;;;;;;;;;;AAiBJ,SAAS,YAAT,CAAuB,QAAvB,EAAyC,QAAzC,EAA2D,YAA3D,EAAiF,CAAjF,EAA4F,CAA5F,EAA4H;;MAEpH,eAAe,iBAAkB,YAAlB,CAArB;MACE,KAAK,IAAI,KAAK,GAAL,CAAU,YAAV,CADX;MAEE,KAAK,IAAI,KAAK,GAAL,CAAU,YAAV,CAFX;MAGE,IAAI,KAAK,CAHX;MAIE,IAAI,KAAK,CAAL,GAAS,MAAM,GAAN,GAAY,CAAZ,GAAgB,CAJ/B;;SAMO,CAAE,WAAW,CAAb,EAAgB,WAAW,CAA3B,CAAP;;;AAGF,SAAS,gBAAT,CAA2B,KAA3B,EAAmC;SAC1B,SAAU,KAAK,EAAL,GAAU,GAApB,CAAP;;;AAGF,SAAS,YAAT,CAAuB,GAAvB,EAAoC,GAApC,EAAkD;SACzC,KAAK,KAAL,CAAY,KAAK,MAAL,MAAkB,MAAM,GAAxB,CAAZ,IAA8C,GAArD;;;AAGF,SAAS,UAAT,CAAqB,EAArB,EAAiC,EAAjC,EAA6C,MAA7C,EAAgF;MACxE,gBAAkC,iBAAkB,QAAlB,CAAxC;kBACiB,aAAjB,EAAgC,MAAhC;oBACmB,aAAnB,EAAkC,EAAlC,EAAsC,EAAtC;gBACc,YAAd,CAA4B,OAA5B,EAAqC,MAArC;SACO,aAAP;;;AAGF,SAAS,gBAAT,CAA8B,QAA9B,EAAoD;;SAEzC,SAAS,eAAT,CAA0B,MAA1B,EAAkC,QAAlC,CAAT;;;AAGF,SAAS,eAAT,CAA0B,aAA1B,EAA2D,CAA3D,EAAuE;gBACvD,YAAd,CAA4B,GAA5B,EAAiC,EAAE,QAAF,EAAjC;;;AAGF,SAAS,iBAAT,CAA4B,aAA5B,EAA6D,CAA7D,EAAwE,CAAxE,EAAoF;gBACpE,YAAd,CAA4B,IAA5B,EAAkC,EAAE,QAAF,EAAlC;gBACc,YAAd,CAA4B,IAA5B,EAAkC,EAAE,QAAF,EAAlC;;;ACrHF;;AAEA,AAEA,IAAa,SAAb;qBAKe,IAAb,EAAiC;;;SAC1B,IAAL,GAAY,IAAZ;SACK,QAAL,GAAgB,EAAhB;;QAEM,eAA6B,KAAK,YAAL,CAAkB,IAAlB,CAAwB,IAAxB,CAAnC;;SAEK,gBAAL,CAAuB,OAAvB,EAAgC,YAAhC;;WAEO,WAAP,CAAoB,KAAK,SAAL,CAAe,IAAf,CAAqB,IAArB,CAApB,EAAiD,GAAjD;;;;;4BAGO,CAhBX,EAgBsB,CAhBtB,EAgBkC;UACxB,UAAU,IAAI,IAAJ,CAAU,CAAV,EAAa,CAAb,CAAhB;WACK,QAAL,CAAc,IAAd,CAAoB,OAApB;WACK,IAAL,CAAU,WAAV,CAAuB,QAAQ,IAA/B;;;;iCAGY,KAtBhB,EAsBoC;UACxB,OADwB,GACH,KADG,CACxB,OADwB;UACf,OADe,GACH,KADG,CACf,OADe;;WAE3B,OAAL,CAAc,OAAd,EAAuB,OAAvB;;;;gCAGU;WACL,QAAL,CACG,MADH,CACW;eAAK,EAAE,QAAF,EAAL;OADX,EAEG,OAFH,CAEY;eAAK,EAAE,IAAF,EAAL;OAFZ;;;;;;AC7BJ,SAAS,UAAT,CAAqB,IAArB,EAAyC;MACnC,SAAJ,CAAe,IAAf;;;AAGF,UAAe;;CAAf;;;;"}